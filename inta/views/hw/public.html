<!DOCTYPE html>
<html>
<head>
	<title>发表文章</title>
	<meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1">
	<link rel="stylesheet" type="text/css" href="/stylesheets/bootstrap.min.css">
	<script src="/javascripts/jquery.min.js" type="text/javascript"></script>
	<script src="/javascripts/jquery.form.min.js" type="text/javascript"></script>
	<script src="/javascripts/underscore-min.js" type="text/javascript"></script>
	<script src="/javascripts/backbone-min.js" type="text/javascript"></script>
	<script src="/javascripts/bootstrap.min.js"></script>
	<link rel="stylesheet" type="text/css" href="/stylesheets/helloworld/public.css">
</head>
<body>
	<div class="container-fluid">
		<form class="form" method="post" enctype="multipart/form-data">
			<div class="form-group">
  				<label for="usr" class="usr">题目:</label>
  				<input type="text" class="form-control" id="usr" name="title" pattern=".{10,40}" required title="题目应为10到40个字符">
			</div>
			<div class="form-group">
  				<label for="comment" class="usr">内容:</label>
  				<textarea class="form-control" rows="20" id="comment" name="content" maxlength="20000" required ></textarea>
			</div>
            <label class="radio-inline">
              <input type="radio" name="tag" value="文章" required>发表文章
            </label>
            <label class="radio-inline">
              <input type="radio" name="tag" value="问题" required>技术提问
            </label>
            <label class="radio-inline">
              <input type="radio" name="tag" value="学习资料" required>个人学习资料交易
            </label>
            <label class="radio-inline">
              <input type="radio" name="tag" value="培训这些事儿" required>培训这些事儿
            </label>
            <label class="radio-inline">
              <input type="radio" name="tag" value="何事囧" required>何事囧
            </label>
            <button type="button" class="btn btn-default btnLink" data-toggle="collapse" data-target="#demo">添加链接</button>
            <button type="button" class="btn btn-default btnLink" onclick="document.getElementById('imgUpload').click();">添加图片</button>
            <input type="file" id="imgUpload" accept="image/*" style="display:none;" name="blogImg">
			<div id="demo" class="collapse">
            <input type="text" class="form-control inputLink" name="link" pattern="https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)" title="请输入正确的链接地址,请以http://或https://开头">
            </div>
            <div class="blah">
            <img id="blah" src="" ><!-- 为纪念哪个牛逼的哥们的解决方法，他取的id -->
            </div>
			<button type="submit" class="btn btn-success pull-right tb">提交</button>
		</form>
	</div>
</body>
<script type="text/javascript">
	$("#imgUpload").change(function(){
		if(this.files[0].size > 2097152){
			alert('图片不能大于2M')
			document.getElementById("imgUpload").value = ""
		} else {
			var reader = new FileReader()
			reader.onload = function (e) {
                $('#blah').attr('src', e.target.result);
            }
            reader.readAsDataURL(this.files[0]);
		}
		
	})
</script>
</html>