<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>课程大纲</title>
  <link rel="stylesheet" type="text/css" href="/stylesheets/bootstrap.min.css">
  <script src="/javascripts/jquery.min.js"></script>
  <script src="/javascripts/bootstrap.min.js"></script>
    <style type="text/css">
    .navbar {
      margin-bottom: 0;
      border-radius: 0;
    }
    .carousel-caption {
      left:10%;
      width: 160px;
    }
    </style>
</head>
<body>
  <!-- 第一块区域导航栏 -->
  <% include ./partials/nav.html %>
<div class="container text-center">    
  <h3>Mongoose课程大纲</h3><br>
  <!-- 第一行视频 -->
<div class="row">
    <div class="col-sm-4">
      <a href="/course/mongoose/1">
      <img src="/images/Course/mongoose.png" class="img-responsive" style="width:100%" alt="Image">
          <div class="carousel-caption">
            <h4>MongoDB回顾</h4>
          </div> 
      </a>
      <a href="/course/mongoose/1">第一节</p></a>
    </div>
    <div class="col-sm-4">
      <a href="/course/mongoose/2">
      <img src="/images/Course/mongoose.png" class="img-responsive" style="width:100%" alt="Image">
          <div class="carousel-caption">
            <h4>MongoDB驱动</h4>
          </div> 
      </a>
      <a href="/course/mongoose/2">第二节</p></a>
    </div>
    <div class="col-sm-4">
      <a href="/course/mongoose/3">
      <img src="/images/Course/mongoose.png" class="img-responsive" style="width:100%" alt="Image">
          <div class="carousel-caption">
            <h4>Mongoose</h4>
          </div> 
      </a>
      <a href="/course/mongoose/3">第三节</p></a>
    </div>
  </div><br>
  <!-- 第二行视频 -->
  <div class="row">
    <div class="col-sm-4">
      <a href="/course/mongoose/4">
      <img src="/images/Course/mongoose.png" class="img-responsive" style="width:100%" alt="Image">
          <div class="carousel-caption">
            <h4>Schema</h4>
          </div> 
      </a>
      <a href="/course/mongoose/4">第四节</p></a>
    </div>
    <div class="col-sm-4">
      <a href="/course/mongoose/5">
      <img src="/images/Course/mongoose.png" class="img-responsive" style="width:100%" alt="Image">
          <div class="carousel-caption">
            <h4>Model</h4>
          </div> 
      </a>
      <a href="/course/mongoose/5">第五节</p></a>
    </div>
    <div class="col-sm-4">
      <a href="/course/mongoose/6">
      <img src="/images/Course/mongoose.png" class="img-responsive" style="width:100%" alt="Image">
          <div class="carousel-caption">
            <h4>增删改查</h4>
          </div> 
      </a>
      <a href="/course/mongoose/6">第六节</p></a>
    </div>
  </div><br>
  <!-- 第三行视频 -->
  <div class="row">
    <div class="col-sm-4">
      <a href="/course/mongoose/7">
      <img src="/images/Course/mongoose.png" class="img-responsive" style="width:100%" alt="Image">
          <div class="carousel-caption">
            <h4>数据验证</h4>
          </div> 
      </a>
      <a href="/course/mongoose/7">第七节</p></a>
    </div>
    <div class="col-sm-4">
      <a href="/course/mongoose/8">
      <img src="/images/Course/mongoose.png" class="img-responsive" style="width:100%" alt="Image">
          <div class="carousel-caption">
            <h4>子文档</h4>
          </div> 
      </a>
      <a href="/course/mongoose/8">第八节</p></a>
    </div>
    <div class="col-sm-4">
      <a href="/course/mongoose/9">
      <img src="/images/Course/mongoose.png" class="img-responsive" style="width:100%" alt="Image">
          <div class="carousel-caption">
            <h4>文档关联</h4>
          </div> 
      </a>
      <a href="/course/mongoose/9">第九节</p></a>
    </div>
  </div><br>
  <!-- 第四行视频 -->
 <div class="row">
    <div class="col-sm-4">
      <a href="/course/mongoose/10">
      <img src="/images/Course/mongoose.png" class="img-responsive" style="width:100%" alt="Image">
          <div class="carousel-caption">
            <h4>关联解析</h4>
          </div> 
      </a>
      <a href="/course/mongoose/10">第十节</p></a>
    </div>
    <div class="col-sm-4">
      <a href="/course/mongoose/11">
      <img src="/images/Course/mongoose.png" class="img-responsive" style="width:100%" alt="Image">
          <div class="carousel-caption">
            <h4>插件plugin</h4>
          </div> 
      </a>
      <a href="/course/mongoose/11">第十一节</p></a>
    </div>
  </div>
</div><br>

<!-- 视频知识文字版 -->
<div class="container brief">
  <h2>Mongoose课程概述</h2>
  <p></p>
  <div class="panel-group">
  <!-- 1 -->
    <div class="panel panel-default">
      <div class="panel-heading">第一节：MongoDB回顾</div>
      <div class="panel-body">
      Mongodb是非关系型数据库，具有高效率，高扩展的特性
      <br>show dbs 显示所有数据库
      <br>use name 使用或创建数据库
      <br>show collections 显示集合
      <br>db.createCollections  创建集合
      <br>db.collection.drop() 删除集合
      <br>db.collection.insert  添加文档
      <br>db.collection.remove 删除文档
      <br>db.collection.update 改变文档
      <br>db.collection.find 查找文档
      </div>
    </div>
    <!-- 2 -->
    <div class="panel panel-default">
      <div class="panel-heading">第二节：MongoDB驱动</div>
      <div class="panel-body">
      应用程序可以通过mongodb的驱动，操作mongoDB数据库
      <br>不同语言编写的应用程序，对应mongoDB不同的驱动
      <br>使用node.js引入mongodb ---> require('mongodb')
      <br>使用MongoClient连接mongodb数据库
      <br>通过node对mongodb进行增删改查
      </div>
    </div>
    <!-- 2 -->
    <div class="panel panel-default">
      <div class="panel-heading">第三节：Mongoose</div>
      <div class="panel-body">
      Mongoose是node.js的驱动，不能作为其他语言的驱动
      <br>通过关系型数据库的思想设计非关系行数据库
      <br>基于mongodb驱动，简化操作
      <br>连接mongodb：
      <br>1. var mongoose = require('mongoose')
      <br>2. mongoose.connect("mongodb://localhost/DB")
      <br>3. mongoose.disconnect()
      </div>
    </div>
    <!-- 3 -->
    <div class="panel panel-default">
      <div class="panel-heading">第四节：Schema</div>
      <div class="panel-body">
      Schema: 定义Mongodb中Collection里面document的结构
      <br>Schema类型：String, Number, Data, Buffer, Boolean, Mixed, ObjectId, Array
      <br>定义Schema
      <br>1. var schema = mongoose.Schema
      <br>2. var schemaName = new schema({名称 + 类型})
      <p style="color">注： __v 这个值，只有document的数组长度发生变化时才会改变<p>
      </div>
    </div>
    <!-- 4 -->
    <div class="panel panel-default">
      <div class="panel-heading">第五节：Model</div>
      <div class="panel-body">
      Model：通过Schema产生的一个类
      <br>Model可以实例化出对象，也就是Mongodb的文档
      <br>Model, Schema, Object的关系就是面条机，滚子，和面条的关系【这里的文字没错，具体可以见视频】
      <br>创建Model：
      <br>1. var model = mongoose.model('model的名称',schema)
      <br>2. var object = new model(json数据)
      <br> ** model一般单独写在一个js文件中
      </div>
    </div>
    <!-- 5 -->
    <div class="panel panel-default">
      <div class="panel-heading">第六节：增删改查</div>
      <div class="panel-body">
      增加: object.save(callback) 
      <br>查询: model.find(callback)
      <br>改变: model.find(function(err,object){ …object.save()…}
      <br>删除: model.find(function(err,object){ …object.remove()…}
      <br>推荐网址：
      <br><a href="https://coursework.vschool.io/mongoose-crud/">https://coursework.vschool.io/mongoose-crud/</a>
      <br><a href="http://mongoosejs.com/docs/">http://mongoosejs.com/docs/</a>
      </div>
    </div>
    <!-- 6 -->
    <div class="panel panel-default">
      <div class="panel-heading">第七节：数据验证</div>
      <div class="panel-body">
        mongoose通过设置schema进行数据验证
        <br>格式：{ name : { type: type, validator: value}}
        <br>required: 必须设置数据
        <br>min, max: 设置数值范围
        <br>match: 正则匹配
        <br>enum: 枚举匹配
        <br>validate: 自定义验证
      </div>
    </div>
    <!-- 7 -->
    <div class="panel panel-default">
      <div class="panel-heading">第八节：子文档</div>
      <div class="panel-body">
      子文档（subdocument）：文档中的文档
      <br>定义子文档需要定义两个schema，一个是父文档的schema，一个是子文档的schema
      <br>创建model时只需使用父schema
      <br>使用点语法访问子文档
      <br>如果有多个子文档，可以使用push和remove增加和删除子文档
      </div>
    </div>
    <!-- 8 -->
    <div class="panel panel-default">
      <div class="panel-heading">第九节：文档关联</div>
      <div class="panel-body">
        文档关联：就是把不同的集合（collection）的文档联系到一起
        <p style="color:red">一个schema要有一个type为mongoose.Schema.Types.ObjectId的键，并且使用ref链接到另一个schema创建的model名称</p>
        如：{key: { type: mongoose.Schema.Types.ObjectId,ref:’modelName’}}
        <br>文档关联步骤：
        <br>1.创建两个Schema和两个model
        <br>2.在一个Schema中引用另一个Molde名称
        <br>3.先保存被引用对象，然后在回调函数中保存有引用对象
        <br>注意：如果两个文档相互引用，其中一个文档需要手动设置_id
        <br>添加中括号可引用多个文档
      </div>
    </div>
    <!-- 9 -->
     <div class="panel panel-default">
      <div class="panel-heading">第十节：解析关联</div>
      <div class="panel-body">
      mongoose使用驻入(populate)进行关联解析
      <br>使用方法：模型.查找.驻入.执行（回调）
      <br>如：models.findOne.populate.exec(function(err,db){ 代码内容 })
      </div>
    </div>
        <!-- 9 -->
     <div class="panel panel-default">
      <div class="panel-heading">第十一节：插件plugin</div>
      <div class="panel-body">
      插件：使mongoose的代码更加模块化
      <br>在mongoose中插件就是一个函数
      <br>插件定义和调用步骤：
      <br>1.在插件函数中需要定义schema参数
      <br>2.使用schema参数调用add方法添加键和类型
      <br>3.使用Schmea.plugin调用插件函数
      <br>mongoose插件网址：http://plugins.mongoosejs.io/
      <br>插件分享网址：https://github.com/Automattic/mongoose/fork
      </div>
    </div>


  </div>
</div>
<!-- 技术史 -->
<div class="container">
  <h2>那年程序员</h2>
  <p style="color:#708090">站在MongoDB肩膀上的平头哥！</p>
  <blockquote>
    <p>当我在wiki上输入mongoose时，出现了一堆帅气的非洲小动物，这些哺乳动物肯定不是咱们要说的。所以又在google上搜了搜mongoosejs，还是毫无所获，不知道是mongoose这个接口太小众了，还是发明它的人太低调了，总之，对不起大家，请大家原谅我不去挖掘mongoose的历史了~</p>  

    <footer>索勇 ---这是这个版本INTA讲解的最后一节课喽</footer>
  </blockquote>
</div>


<!-- 下面是footer部分 -->
  <footer class="container-fluid text-right">
     <div style="margin: 0;padding: 0;">
   <img src="/images/point.png" style="width: 100px;height: 40px;" />
   </div>
  </footer>

  <!-- 登录注册model -->
  <% include ./partials/modal.html %>

</body>
</html>